

![image-20250729110259288](C:\Users\FanYang\AppData\Roaming\Typora\typora-user-images\image-20250729110259288.png)

## 一、概述

本手册用于解析 Redis 监控面板各项指标的功能、用途及参数意义，帮助运维与开发人员实时观测 Redis 服务运行状态、排查性能瓶颈与稳定性问题，保障缓存服务高效支撑业务。

## 二、指标详细解析

### （一）操作与连接类指标

#### 1. Ops/sec

- **功能**：展示 Redis 每秒执行的操作数（operations per second ），反映 Redis 读写负载压力 。
- **用途**：用于快速识别 Redis 繁忙程度，结合业务场景判断操作数是否合理，如操作数突增可能预示流量波动、异常请求或性能瓶颈 。
- **参数意义**：示例中 “1k ops/s” 代表每秒约执行 1000 次操作，可辅助定位流量高峰、分析性能受影响时段。

#### 2. Connected Clients

- **功能**：统计当前与 Redis 建立连接的客户端数量 。
- **用途**：排查连接池配置合理性，如判断是否因客户端过多 “打满” 连接池；识别潜在连接泄漏问题，若连接数持续增长，可能耗尽系统资源 。
- **参数意义**：示例值 “159” 表示有 159 个活跃客户端连接，需结合 Redis 配置的 `maxclients`（默认 10000 ），判断是否接近连接数上限。

#### 3. Number of Keys

- **功能**：呈现 Redis 中当前存储的 key 总数（近似值，因内部统计逻辑可能存在延迟 ）。
- **用途**：辅助评估数据规模，结合内存使用情况分析 key 密度，为优化数据结构提供依据，如通过 key 总数和内存占用，判断是否存在可优化的存储场景 。
- **参数意义**：示例 “48.5 k” 约为 4.85 万 keys ，若 key 数量持续大幅增长，需关注内存使用、过期策略等，预防内存不足等问题。

### （二）网络流量类指标（Network）

#### 1. Input（入站流量）

- **功能**：计量 Redis 每秒接收的网络输入流量，涵盖客户端发往 Redis 的命令、数据等 。
- **用途**：用于排查大流量写入操作，如批量 `SET`/`HSET` 等；识别异常请求，若流量突增，可能伴随错误命令发送，需及时溯源 。
- **参数意义**：示例 “133.6 kB/s” 表示每秒入站流量约 133KB ，若流量持续高于业务预期，需检查客户端操作行为，确认是否存在不合理的数据写入。

#### 2. Output（出站流量）

- **功能**：统计 Redis 每秒发送的网络输出流量，包含返回给客户端的查询结果、响应等 。
- **用途**：定位大结果集查询操作，如 `KEYS *`、大 `GET` 操作易引发流量飙升；优化不必要的数据返回，通过协议、序列化方式等减少数据体积 。
- **参数意义**：示例 “32.2 kB/s” 代表每秒出站流量约 32KB ，若流量突发增加，需结合业务查询逻辑分析，排查是否存在不合理的数据返回。

### （三）Key 管理类指标（Keys）

#### 1. Expired

- **功能**：记录因 Redis 过期策略（`expire`/`ttl` ）自动删除的 key 数量 。
- **用途**：验证 `expire` 配置有效性，如业务要求 key 按特定时长（如 2 小时）过期，可通过观测该指标确认删除频率是否符合预期；排查配置错误导致的 key 过早或过晚过期问题 。
- **参数意义**：示例 “7k” 表示近期每秒约有 7000 个 key 因过期被删除，若与业务预期不符，需检查 `EXPIRE` 命令使用或 Redis 内存策略设置。

#### 2. Evicted

- **功能**：当 Redis 因内存不足触发 `maxmemory` 限制时，依据淘汰策略（如 `allkeys-lru` ）主动删除的 key 数量 。
- **用途**：判断内存是否处于紧张状态，若该指标持续非 0 ，可能导致缓存失效、业务重试等问题，需结合内存使用相关指标（如 `Memory Limit`、`Used Memory` ）分析；指导内存扩容或 key 存储优化决策，如压缩数据、删除无用 key 等 。
- **参数意义**：示例 “0” 表示当前未触发内存淘汰，若长期非 0 ，需关注内存资源分配，及时调整配置。

### （四）缓存有效性类指标（Keyspace）

#### 1. Hits

- **功能**：统计 Redis 缓存命中次数，即查询的 key 存在于内存中 的次数。
- **用途**：衡量缓存有效性，命中率越高，说明业务查询对 Redis 依赖度越高，能有效减轻下游存储压力；辅助优化缓存策略，若命中率低，需排查 key 过期、写入逻辑等问题 。
- **参数意义**：示例 “110 k” 表示累计命中约 11 万次，需结合 `Misses` 计算命中率（`Hits/(Hits + Misses)` ），评估缓存使用效率。

#### 2. Misses

- **功能**：记录 Redis 缓存未命中次数，即查询的 key 不存在，可能穿透到数据库或返回空的次数 。
- **用途**：排查缓存穿透问题，大量未命中可能使数据库压力陡增；优化 key 过期、删除逻辑，如检查 key 是否被过早 evict 或未正确写入缓存 。
- **参数意义**：示例 “3 Mil”（300 万 ）表示累计未命中约 300 万次，若命中率过低（如 < 80% ），需调整缓存策略，如延长过期时间、预热热点 key 。

### （五）内存使用类指标（Memory）

#### 1. Used Memory

- **功能**：展示 Redis 实际使用的内存，包含数据、内部结构、缓存等占用内存 。
- **用途**：监控内存使用趋势，判断是否接近 `Memory Limit` ，预防内存不足触发 key 淘汰（`Evicted` ）；为内存扩容、数据结构优化提供依据，如结合 key 数量分析内存占用合理性 。
- **参数意义**：示例 “379.12 MB” 为当前 Redis 内存使用量，需关注其与 `Memory Limit` 的距离，避免触发内存淘汰影响业务。

#### 2. Used Memory, Peak

- **功能**：记录 Redis 历史最大内存使用量（Redis 重启后重置 ）。
- **用途**：判断内存是否存在突增风险，若峰值接近 `Memory Limit` ，需警惕后续流量引发 key 淘汰；辅助排查内存异常波动问题，如峰值远高于当前使用量，需检查是否存在 “突发大 key” 写入等情况 。
- **参数意义**：示例 “380.65 MB” 为历史峰值，若持续接近当前 `Used Memory` ，说明内存使用稳定；若峰值异常偏高，需深入分析业务操作。

#### 3. Used Memory, LUA

- **功能**：统计 Redis 中 Lua 脚本占用的内存，如复杂 `EVAL` 操作的临时数据占用 。
- **用途**：排查 Lua 脚本内存泄漏问题，若该指标持续增长，可能因脚本逻辑未合理释放资源导致；优化 Lua 脚本编写，减少不必要的内存占用 。
- **参数意义**：示例 “182.27 kB” 表示 Lua 脚本内存占比较小，若突发增长，需检查 `EVAL` 命令执行情况。

#### 4. Memory Limit

- **功能**：Redis 配置的最大可用内存（由 `maxmemory` 参数设置，默认无限制，实际受物理内存约束 ）。
- **用途**：决定内存不足时的淘汰策略（如 `allkeys-lru` ）执行逻辑；根据业务压测结果调整该值，过小易触发 key 淘汰影响业务，过大可能耗尽服务器物理内存 。
- **参数意义**：示例 “2.15 GB” 为当前配置的内存限制，需结合 `Used Memory` 评估内存使用风险，及时调整配置。

#### 5. Total System Memory

- **功能**：显示服务器物理内存总量 。
- **用途**：辅助评估 Redis 内存分配合理性，如示例中 379MB 占 33.7GB 的 1% 左右，若占比过高，需考虑拆分 Redis 实例；为服务器资源规划提供参考，判断是否因 Redis 内存占用影响其他服务 。

### （六）服务运行类指标

#### 1. Uptime

- **功能**：标识 Redis 服务运行时长（Redis 重启后重置 ）。
- **用途**：判断服务是否稳定运行，如示例中 “59 min” 表示刚重启不久；观察长期运行后的性能衰减情况，若服务频繁重启（uptime 短 ），需排查配置错误、内存不足或崩溃问题 。

#### 2. Version

- **功能**：展示 Redis 服务器版本号 。
- **用途**：确认 Redis 版本特性与兼容性，不同版本在命令支持、性能优化等方面存在差异，如 Redis 7+ 支持更细粒度 ACL 权限；关注官方漏洞修复信息，若存在安全补丁，需及时升级版本 。
- **参数意义**：示例 “6.2.13” 为当前 Redis 版本，需结合业务需求与官方文档，评估版本适配性。

#### 3. Eviction Policy

- **功能**：定义 Redis 内存不足时的 key 淘汰策略（当前示例为 `allkeys-lru` ）。

- 用途

  ：控制内存溢出时的行为，常见策略及适用场景：

  - `allkeys-lru`：删除最近最少使用的 key ，适用于通用缓存场景；
  - `volatile-ttl`：优先删除快过期的 key （需 key 带 `expire` ），适合有明确过期时间要求的业务；
  - `noeviction`：拒绝写操作，避免数据丢失，多用于纯缓存场景 。

- **参数意义**：示例 “allkeys-lru” 表示内存不足时，Redis 会无差别淘汰最少使用的 key ，需结合业务数据重要性调整，如敏感数据需避免被 evict ，可考虑拆分实例。

## 三、指标联动分析实践

### （一）流量与负载异常分析

当 `Ops/sec` 与 `Network` 指标异常（如操作数突增、流量异常波动 ）时，联动排查客户端突发请求，检查是否存在不合理的批量操作（如大规模 `KEYS *` 命令 ）；分析业务逻辑，确认是否因营销活动、系统故障等引发流量高峰。

### （二）内存与淘汰风险分析

若 `Used Memory` 接近 `Memory Limit` 且 `Evicted` 指标长期非 0 ，需调整 `maxmemory` 配置扩容内存，或优化 key 存储（如压缩数据、清理无用 key ）；结合 `Used Memory, Peak` ，判断内存突增风险，提前规划资源。

### （三）缓存有效性优化分析

通过 `Hits` 与 `Misses` 计算命中率，若命中率过低，联动检查 `Expired` 指标确认 key 过期逻辑，排查缓存穿透问题；调整缓存策略，如延长热点 key 过期时间、预热关键数据，提升缓存利用率。

### （四）服务稳定性排查分析

依据 `Uptime` 判断服务运行时长，若频繁重启，结合 `journalctl` 等工具查看 Redis 日志，排查配置错误、内存不足、崩溃等问题；通过 `Version` 确认版本特性，判断是否因版本兼容性引发稳定性故障。



通过上述指标解析与联动分析方法，可高效定位 Redis 性能瓶颈、稳定性风险与资源配置问题，保障缓存服务稳定、高效支撑业务运行 。